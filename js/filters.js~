/* global angular */

var imoveisDbFilters = angular.module('imoveisDbFilters', []).filter('dateFormat', function() {
	return function(input) {
		if(!input) return "";
		input = new Date(input);
		var res = (input.getMonth()+1) + "/" + input.getDate() + "/" + input.getFullYear() + " ";
		var hour = input.getHours();
		var ampm = "AM";
		if(hour === 12) ampm = "PM";
		if(hour > 12){
			hour-=12;
			ampm = "PM";
		}
		var minute = input.getMinutes()+1;
		if(minute < 10) minute = "0" + minute;
		res += hour + ":" + minute + " " + ampm;
		return res;
	
	};
}).filter('docFilter', [function () {
    return function (documents, selectedDocTypes) {
        if (!angular.isUndefined(documents) && !angular.isUndefined(selectedDocTypes) && selectedDocTypes.length > 0) {
            var tempDocuments = [];
            angular.forEach(selectedDocTypes, function (key) {
                angular.forEach(documents, function (document) {
                    if (angular.equals(document.tipo, key)) {
                        tempDocuments.push(document);
                    }
                });
            });
            return tempDocuments;
        } else {
            return documents;
        }
    };
}]);
